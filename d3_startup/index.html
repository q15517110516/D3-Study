<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3 Test</title>
    <script type="text/javascript" src="https://d3js.org/d3.v5.js"></script>

</head>

<style>
    div.bar {
        display: inline-block;
        width: 20px;
        height: 75px;
        background-color: teal;
        margin-right: 2px;
    }
    
    svg.pumpkin {
        fill: yellow;
        stroke: orange;
        stroke-width: 5;
    }
</style>

<body>
    <script type="text/javascript">
        var dataset = []; // Initialize empty array
        for (var i = 0; i < 25; i++) { // Loop 25 times
            var newNumber = Math.round(Math.random() * 30); // New random number (0-30)
            dataset.push(newNumber); // Add new number to array
        }
        d3.select("body") // Call D3 "select" method, which uses CSS selector to select an element from the DOM ("body")
            .selectAll("div") // Select all paragraphs in the DOM. Because there are no paragraphs at all, it returns an empty selection. Correspond this empty selection to many paragraphs that "will appear"
            .data(dataset) // Count and parse data values. Our data set have 5 values, so the code passed here will be executed 5 times, corresponding to 5 values
            .enter() // To generate new data-bound elements, you must use the 'enter()' method. This method compares the number of DOM elements with the data to be processed. If there are more data values than the corresponding DOM element, the 'enter()' method generates new placeholder elements and performs the remaining operations on each placeholder element. Each placeholder element is passed to the next method in the chain.
            .append("div") // Create a new "p" element and add it to the end of our selected element, exactly inserted at the end of the "body" tag, just before the </body>
            .attr("class", "bar") // 'attr()' is used to set the HTML attribute and its value on the element
            .style("height", function(d) { // The 'style()' method is used to apply CSS attributes and values directly to HTML elements. This method is equivalent to writing the CSS rules in the style directly into the HTML element 
                var barHeight = d * 5; // Scale up by factor of 5
                return barHeight + "px";
            });
        // .style("color", function(d) {
        //     if (d > 15) {
        //         return "red";
        //     } else {
        //         return "black";
        //     }
        // })
        // .text(function(d) {
        //     return d;
        // });

        // Examples of how to draw circles using SVG along with ".attr()"
        var w = 500;
        var h = 100;
        var dataset1 = [5, 10, 15, 20, 25];

        var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

        var circles = svg.selectAll("circle")
            .data(dataset1)
            .enter()
            .append("circle");

        circles.attr("cx", function(d, i) {
                return (i * 50) + 25;
            })
            .attr("cy", h / 2)
            .attr("r", function(d) {
                return d;
            })
            .attr("fill", "yellow")
            .attr("stroke", "orange")
            .attr("stroke-width", function(d) {
                return d / 2;
            });

        // Draw a hisogram
        var dataset2 = [5, 10, 13, 19, 21, 25, 22, 18, 15, 13, 11, 12, 15, 20, 18, 17, 16, 18, 23, 25];
        var barPadding = 1;

        var svgHistogram = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);

        svgHistogram.selectAll("rect")
            .data(dataset2)
            .enter()
            .append('rect')
            .attr("x", function(d, i) {
                return i * (w / dataset2.length);
            })
            .attr("y", function(d) {
                return h - (d * 4);
            })
            .attr("width", w / dataset2.length - barPadding)
            .attr("height", function(d) {
                return d * 4;
            })
            .attr("fill", function(d) {
                return "rgba(0, 0," + (d * 10) + ")";
            });

        svgHistogram.selectAll("text")
            .data(dataset2)
            .enter()
            .append("text")
            .text(function(d) {
                return d;
            })
            .attr("x", function(d, i) {
                return i * (w / dataset2.length) + 5;
            })
            .attr("y", function(d) {
                return h - (d * 4) + 15;
            })
            .attr("font-family", "sans-serif")
            .attr("font-size", "11px")
            .attr("fill", "white");
        // .attr("text-anchor", "middle");
    </script>


    <!-- draw a rectangular -->
    <svg width="500" height="50">
        <rect x="0" y="0" width="500" height="50"></rect> 
    </svg>

    <!-- draw a circle -->
    <svg width="500" height="60">
        <circle cx="150" cy="30" r="25" fill="yellow" stroke="orange" stroke-width="5"></circle>
        <circle cx="300" cy="30" r="25" class="pumpkin"></circle>
    </svg>

    <!-- draw a ellipse -->
    <svg width="500" height="50">
        <ellipse cx="250" cy="25" rx="100" ry="25"></ellipse>
    </svg>

    <!-- draw a line -->
    <svg width="500" height="50">
        <line x1="0" y1="0" x2="500" y2="50" stroke="black"></line> 
    </svg>

    <!-- text -->
    <svg width="500" height="50">
        <text x="250" y="25" font-family="sans-serif" font-size="25" fill="grey">Easy-peasy</text> 
    </svg>

    <!-- Layers and drawing orders -->
    <svg>
        <rect x="0" y="0" width="30" height="30" fill="purple"></rect>
        <rect x="20" y="5" width="30" height="30" fill="blue"></rect>
        <rect x="40" y="10" width="30" height="30" fill="green"></rect>
        <rect x="60" y="15" width="30" height="30" fill="yellow"></rect>
        <rect x="80" y="20" width="30" height="30" fill="red"></rect>
    </svg>

    <!-- Transparency -->
    <!-- use "rgba" to set transparency -->
    <svg>
        <circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128, 1.0)"></circle>
        <circle cx="50" cy="25" r="20" fill="rgba(0, 0, 255, 0.75)"></circle>
        <circle cx="75" cy="25" r="20" fill="rgba(0, 255, 0, 0.5)"></circle>
        <circle cx="100" cy="25" r="20" fill="rgba(255, 255, 0, 0.25)"></circle>
        <circle cx="125" cy="25" r="20" fill="rgba(255, 0, 0, 0.1)"></circle>
    </svg>
    <svg>
        <circle cx="25" cy="25" r="20" fill="rgba(128, 0, 128,0.75)" stroke="rgba(0, 255, 0, 0.25)" stroke-width="10"></circle>
        <circle cx="75" cy="25" r="20" fill="rgba(0, 255, 0, 0.75)" stroke="rgba(0, 0, 255, 0.25)" stroke-width="10"></circle>
        <circle cx="125" cy="25" r="20" fill="rgba(255, 255, 0, 0.75)" stroke="rgba(255, 0, 0, 0.25)" stroke-width="10"></circle>
    </svg>

    <!-- use "opacity" to set transparency -->
    <svg>
        <circle cx="25" cy="25" r="20" fill="purple" stroke="green" stroke-width="10" opacity="0.9"></circle>
        <circle cx="65" cy="25" r="20" fill="green" stroke="blue" stroke-width="10" opacity="0.5"></circle>
        <circle cx="105" cy="25" r="20" fill="yellow" stroke="red" stroke-width="10" opacity="0.1"></circle>
    </svg>



</body>

</html>